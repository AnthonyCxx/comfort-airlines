<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tickets</title>
    <link rel="stylesheet" href="../css/styles.css" />
    <link rel="stylesheet" href="../css/calendar.css" />
    <link rel="stylesheet" href="../css/tickets.css" />

    <link rel="icon" href="../images/logo.png" sizes="any" type="image/png" />
  </head>
  <body>
    <div class="container">
      <div id="side-bar">
        <img src="../images/logo.png" id="logo" />
        <div id="icon-area">
          <div class="icon-button">
            <a href="../dashboard">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="icon icon-tabler icon-tabler-home"
                width="30"
                height="30"
                viewBox="0 0 24 24"
                stroke-width="1"
                stroke="#454545"
                fill="none"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path d="M5 12l-2 0l9 -9l9 9l-2 0" />
                <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
                <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
              </svg>
            </a>
          </div>
          <div class="icon-button icon-button-current">
            <a href="./">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="icon icon-tabler icon-tabler-ticket"
                width="30"
                height="30"
                viewBox="0 0 24 24"
                stroke-width="1"
                stroke="#454545"
                fill="none"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path d="M15 5l0 2" />
                <path d="M15 11l0 2" />
                <path d="M15 17l0 2" />
                <path
                  d="M5 5h14a2 2 0 0 1 2 2v3a2 2 0 0 0 0 4v3a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-3a2 2 0 0 0 0 -4v-3a2 2 0 0 1 2 -2"
                />
              </svg>
            </a>
          </div>
          <div class="icon-button">
            <a href="../map">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="icon icon-tabler icon-tabler-map"
                width="30"
                height="30"
                viewBox="0 0 24 24"
                stroke-width="1"
                stroke="#454545"
                fill="none"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path d="M3 7l6 -3l6 3l6 -3v13l-6 3l-6 -3l-6 3v-13" />
                <path d="M9 4v13" />
                <path d="M15 7v13" />
              </svg>
            </a>
          </div>
          <div class="icon-button">
            <a href="../timetable">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="icon icon-tabler icon-tabler-calendar-time"
                width="30"
                height="30"
                viewBox="0 0 24 24"
                stroke-width="1"
                stroke="#454545"
                fill="none"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path
                  d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4"
                />
                <path d="M18 18m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0" />
                <path d="M15 3v4" />
                <path d="M7 3v4" />
                <path d="M3 11h16" />
                <path d="M18 16.496v1.504l1 1" />
              </svg>
            </a>
          </div>
          <div class="icon-button">
            <a href="../reports">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="icon icon-tabler icon-tabler-report-analytics"
                width="32"
                height="32"
                viewBox="0 0 24 24"
                stroke-width="1"
                stroke="#454545"
                fill="none"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path
                  d="M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2"
                />
                <path
                  d="M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"
                />
                <path d="M9 17v-5" />
                <path d="M12 17v-1" />
                <path d="M15 17v-3" />
              </svg>
            </a>
          </div>
          <div class="icon-button">
            <a href="../simulation/">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="icon icon-tabler icon-tabler-plane-departure"
                width="32"
                height="32"
                viewBox="0 0 24 24"
                stroke-width="1"
                stroke="#454545"
                fill="none"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path
                  d="M14.639 10.258l4.83 -1.294a2 2 0 1 1 1.035 3.863l-14.489 3.883l-4.45 -5.02l2.897 -.776l2.45 1.414l2.897 -.776l-3.743 -6.244l2.898 -.777l5.675 5.727z"
                />
                <path d="M3 21h18" />
              </svg>
            </a>
          </div>
        </div>

        <a href="../" style="margin-bottom: -0.3em">
          <img src="../images/user.jpg" id="user" />
        </a>
      </div>

      <div class="content">
        <div class="header">
          <div class="dropdown-container" id="dropdownContainer">
            <!-- Dropdown content -->
            <div class="dropdown-content">
              <!-- Placeholder content -->

              <div id="day-unit">
                <div id="day-counter"><h3 id="day">Day 1</h3></div>
                <div id="unit-container">
                  <h4 style="margin-top: 1em; z-index: 1">Step Size</h4>
                  <input
                    id="units"
                    autocomplete="off"
                    type="text"
                    placeholder="10"
                  />
                </div>
              </div>
              <div id="sim-controls">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="icon icon-tabler icon-tabler-player-skip-back-filled"
                  width="32"
                  height="32"
                  viewBox="0 0 24 24"
                  stroke-width="1"
                  stroke="#454545"
                  fill="none"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                  <path
                    d="M19.496 4.136l-12 7a1 1 0 0 0 0 1.728l12 7a1 1 0 0 0 1.504 -.864v-14a1 1 0 0 0 -1.504 -.864z"
                    stroke-width="0"
                    fill="currentColor"
                  />
                  <path
                    d="M4 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z"
                    stroke-width="0"
                    fill="currentColor"
                  />
                </svg>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="icon icon-tabler icon-tabler-player-play-filled"
                  width="30"
                  height="30"
                  viewBox="0 0 24 24"
                  stroke-width="1"
                  stroke="#454545"
                  fill="none"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                  <path
                    d="M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z"
                    stroke-width="0"
                    fill="currentColor"
                  />
                </svg>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="icon icon-tabler icon-tabler-player-skip-forward-filled"
                  width="32"
                  height="32"
                  viewBox="0 0 24 24"
                  stroke-width="1"
                  stroke="#454545"
                  fill="none"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                  <path
                    d="M3 5v14a1 1 0 0 0 1.504 .864l12 -7a1 1 0 0 0 0 -1.728l-12 -7a1 1 0 0 0 -1.504 .864z"
                    width="32"
                    height="32"
                    stroke-width="0"
                    fill="currentColor"
                  />
                  <path
                    d="M20 4a1 1 0 0 1 .993 .883l.007 .117v14a1 1 0 0 1 -1.993 .117l-.007 -.117v-14a1 1 0 0 1 1 -1z"
                    width="32"
                    height="32"
                    stroke-width="0"
                    fill="currentColor"
                  />
                </svg>
              </div>
            </div>
          </div>
          <div
            style="margin-top: -0.75em; margin-bottom: 0.75em; opacity: 80%"
            id="datetime"
          ></div>
          <h1 id="hello" style="margin-top: 5em; text-align: left">Hello,</h1>

          <script>
            document.addEventListener('DOMContentLoaded', function () {
              // Get the username from session storage
              const username = sessionStorage.getItem('username');
          
              // Get the hello element
              const helloElement = document.getElementById('hello');
          
              // Extract the first name from the username
              const firstName = username ? username.split(' ')[0] : '';
          
              // Update the content of the hello element with the formatted username
              helloElement.textContent += firstName
                ? ' ' + firstName.charAt(0).toUpperCase() + firstName.slice(1)
                : ' Guest';
            });
          </script>
          
          <h2 id="select" style="margin-top: -0.75em; text-align: left">
            Type your destination into the search box to get started
          </h2>
          <div class="search-box" id="search-box" style="z-index: 1">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="icon icon-tabler icon-tabler-map-search"
              width="32"
              height="32"
              viewBox="0 0 24 24"
              stroke-width="1"
              stroke="#454545"
              fill="none"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M11 18l-2 -1l-6 3v-13l6 -3l6 3l6 -3v7.5" />
              <path d="M9 4v13" />
              <path d="M15 7v5" />
              <path d="M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" />
              <path d="M20.2 20.2l1.8 1.8" />
            </svg>
            <input
              type="text"
              id="destinationInput"
              autocomplete="off"
              placeholder="Type destination city"
            />
          </div>

          <div class="separator"></div>
        </div>
        <div class="main-area">
          <div id="destinationList"></div>
          <div id="boardingPass">
            <div id="passHeader">
              <div class="headerSection">
                <img src="../images/logo.png" id="passLogo" />
                <h1>BOARDING PASS</h1>
            </div>
            <div class="headerSection">
              <div id="smallHeader">BOARDING  <br> PASS</div>
          </div>
            </div>
            <div id="passInfo">
              <div class="column1">
                <h2>PASSENGER NAME</h2>
                <h2>FROM</h2>
                <h2>TO</h2>
                <h2 style="margin-top: 2em">GATE</h2>
                <h2 class="gateNum">A30</h2>
              </div>
              <div class="column1">
                <h3>COREY LAWRENCE</h3>
                <h3>NEW YORK</h3>
                <h3>LOS ANGELES</h3>
                <h2 style="margin-top: 2em">BORDING TIME</h2>
                <h3 class="gateNum">3:30PM</h2>
              </div>
              <div class="column1">
                <h3 style="opacity: 0;">BLANK</h3>
                <h2>FLIGHT</h2>
                <h2>DATE</h2>
                <h2 style="margin-top: 2em">SEAT</h2>
                <h3 class="gateNum">12E</h3>
              </div>
              <div class="column1">
                <h3 style="opacity: 0;">BLANK</h3>
                <h3>BA301</h3>
                <h3>15MAY</h3>
              </div>
              <div id="barcode">
                <img style="height: 10em;" src="../images/barcode.png">
              </div>
              <div id="dottedLine"></div>
              <div class="column1">
                <h3 style="opacity: 0;">BLANK</h3>
                <h2 class="condensedH2">NAME</h2>
                <h2 class="condensedH2">FROM</h2>
                <h2 class="condensedH2">TO</h2>
                <h2 class="condensedH2">FLIGHT</h2>
                <h2 class="condensedH2">DATE</h2>
              </div>
              <div class="column1">
                <h3 style="opacity: 0;">BLANK</h3>
                <h3 class="condensedH3">COREY LAWRENCE</h3>
                <h3 class="condensedH3">NEW YORK</h3>
                <h3 class="condensedH3">LOS ANGELES</h3>
                <h3 class="condensedH3">BA301</h3>
                <h3 class="condensedH3">15MAY</h3>
              </div>
            </div>
            <p id="bordingStatement">Bording gate closes 15 minutes prior to departure time</p>
            <div id="smallPassBottom">
              <div class="smallItem">
              <h2 class="condensedH2" style="margin-top: 2em">GATE</h2>
              <h3  class="condensedH3" class="gateNum">A30</h3>
            </div>
            <div class="smallItem">
              <h2 class="condensedH2" style="margin-top: 2em">BORDING TIME</h2>
              <h3 class="condensedH3" class="gateNum">3:30PM</h3>
            </div>
            <div class="smallItem">
              <h2 class="condensedH2" style="margin-top: 2em">SEAT</h2>
              <h3 class="condensedH3" class="gateNum">12E</h3>
            </div>
            </div>
          </div>

        </div>
      </div>
      
      <div
        class="right-box"
        style="font-family: 'SF Pro', Arial, sans-serif !important"
      >
        <div id="startWeather" class="weather-box">
          <a
            class="weatherwidget-io"
            href="https://forecast7.com/en/34d05n118d24/los-angeles/?unit=us"
            data-label_1="LOS ANGELES"
            data-font="SF Pro"
            data-theme="original"
            data-days="7"
            data-basecolor="rgba(245, 245, 245, 0)"
            data-textcolor="#000000"
            data-highcolor="#000000"
            data-lowcolor="#000000"
            data-mooncolor="#c8c8c8"
            data-cloudcolor="#c8c8c8"
            >LOS ANGELES WEATHER</a
          >
          <script>
            !(function (d, s, id) {
              var js,
                fjs = d.getElementsByTagName(s)[0];
              if (!d.getElementById(id)) {
                js = d.createElement(s);
                js.id = id;
                js.src = '../js/widget.js';
                fjs.parentNode.insertBefore(js, fjs);
              }
            })(document, 'script', 'weatherwidget-io-js');
          </script>
        </div>
        <div id="destWeather" class="weather-box">
          <a
            class="weatherwidget-io"
            href="https://forecast7.com/en/40d71n74d01/new-york/?unit=us"
            data-label_1="NEW YORK"
            data-font="SF Pro"
            data-theme="original"
            data-days="7"
            data-basecolor="rgba(245, 245, 245, 0)"
            data-textcolor="#000000"
            data-highcolor="#000000"
            data-lowcolor="#000000"
            data-mooncolor="#c8c8c8"
            data-cloudcolor="#c8c8c8"
            >LOS ANGELES WEATHER</a
          >
          <script>
            !(function (d, s, id) {
              var js,
                fjs = d.getElementsByTagName(s)[0];
              if (!d.getElementById(id)) {
                js = d.createElement(s);
                js.id = id;
                js.src = '../js/widget.js';
                fjs.parentNode.insertBefore(js, fjs);
              }
            })(document, 'script', 'weatherwidget-io-js');
          </script>
        </div>
        <div class="payment">
          <div class="card">
            <h4 id="payment-method">Payment Details</h4>
            <img
              src="../images/discover.png"
              id="discover"
            />
            <div id="quantitySelector">
              <div id="ticketCostArea">
                <div style="padding-right: 6em; white-space: nowrap;" id="ticketCostLabel">Ticket Cost: </div>
              <div id="ticketCostDisplay"></div>
            </div>
              
              <div id="quantityArea">
                <label id="quantityLabel" for="quantity">Quantity:</label>
                <input type="number" id="quantity" name="quantity" min="1" value="1">
              </div>
            </div>
            <div id="paymentSeparator"></div>
            <div id="balanceArea">
              
              <div class="balance" style="display: flex; flex-direction: column; margin-top: -1em;">
                <h5 style="margin-bottom: -1.5em;">Total Balance</h5>
                <div class="balance-details">
                  <img src="../images/flag.webp" alt="flag icon for payment" style="width: 1em; height: 1em; padding-right: .25em;" />
                  <h4 id="total" style="color: black" >0.00 USD</h4>
                </div>
              </div>
              <button id="paymentButton" onclick="validateAndSwitch()">Continue</button>
              <button id="payButton" onclick="pay()">Confirm</button>

            </div>
          </div>
        </div>
        </div>
      </div>
    </div>


    <script>
      function validateAndSwitch() {
        // Getting the quantity entered by the user
        var quantity = document.getElementById("quantity").value;
    
        // Checking if the quantity is not negative
        if (quantity >= 0) {
          // Calling the switchToPaymentMethod function
          switchToPaymentMethod();
        } else {
          // Alerting the user if the quantity is negative
          alert("Quantity cannot be negative.");
        }
      }
    
      function switchToPaymentMethod() {
        document.getElementById('ticketCostDisplay').style.display = 'none'; 
        document.getElementById('quantityLabel').style.display = 'none';
        document.getElementById('quantity').style.display = 'none';
        document.getElementById('paymentSeparator').style.display = 'none';
        document.getElementById('paymentButton').style.display = 'none';
        document.getElementById('payButton').style.display = 'block';
        document.getElementById('ticketCostLabel').style.display = 'none';
        document.getElementById('discover').style.opacity = '0';
        document.getElementById('discover').style.display = 'block';
        document.getElementById('discover').style.margin = '0 0 0 0';
        document.getElementById('balanceArea').style.bottom = '0em';
        document.getElementById('payment-method').style.top = '1.4em';
        document.getElementById('payment-method').textContent = 'Payment Method';
        setTimeout(function () {
            discover.style.transition = 'opacity 0.5s ease-in';
            discover.style.opacity = '1';}, 100);
      }
      function pay() {
    // Redirect to ../dashboard
    window.location.href = "../dashboard";
}
    </script>
    <script>
      document.getElementById('destinationInput')
        .addEventListener('click', function () {
          var helloElement = document.getElementById('hello');
          var selectElement = document.getElementById('select');

          document.querySelector('#search-box').style.marginTop = '-15em';
          helloElement.classList.add('hidden'); // Apply hidden class to hello element
          selectElement.classList.add('hidden'); // Apply hidden class to select element
        });

      // Get the current date and time
      function getCurrentDateTime() {
        const now = new Date();
        const options = {
          weekday: 'short',
          month: 'short',
          day: 'numeric',
          hour: 'numeric',
          minute: 'numeric',
        };
        return now.toLocaleDateString('en-US', options);
      }

      // Update the date and time every second
      function updateDateTime() {
        const datetimeElement = document.getElementById('datetime');
        if (datetimeElement) {
          datetimeElement.textContent = getCurrentDateTime();
        }
      }

      // Update the date and time initially and then every second
      updateDateTime();
      setInterval(updateDateTime, 1000);
    </script>
    <script>
      document
        .getElementById('search-box')
        .addEventListener('input', function () {
          var searchBox = document.getElementById('search-box');
          var destinationList = document.getElementById('destinationList');

          // Add class to search box
          searchBox.classList.add('clicked');

          // Show destination list and change opacity
          destinationList.style.opacity = '1';
          destinationList.style.display = 'block';
        });
    </script>
<script>
  document.getElementById('destinationList').addEventListener('click', function () {
  var searchBox = document.getElementById('search-box');
  var destinationList = document.getElementById('destinationList');
  var boardingPass = document.getElementById('boardingPass');
  var quantity = document.getElementById('quantitySelector');
  var ticketCostDisplay = 

  // Add class to search box
  searchBox.classList.remove('clicked');

  // Hide destination list
  destinationList.style.opacity = '0';
  destinationList.style.display = 'none';

  // Show boarding pass with opacity transition
  boardingPass.style.display = 'flex';
  document.getElementById('ticketCostDisplay').style.display = 'block'; 
  document.getElementById('quantityLabel').style.display = 'block';
  document.getElementById('quantity').style.display = 'block';
  document.getElementById('paymentSeparator').style.display = 'block';
  document.getElementById('paymentButton').style.display = 'block';
  document.getElementById('discover').style.display = 'none';
  document.getElementById('balanceArea').style.bottom = '0em';
  document.getElementById('payment-method').style.top = '1.5em';



  setTimeout(function () {
    boardingPass.style.transition = 'opacity 0.5s ease-in';
    boardingPass.style.opacity = '1';
    quantity.style.opacity = '1';
    const ticketCost = parseFloat(sessionStorage.getItem('ticketCostFloat'));
    console.log("original ticket cost: ", ticketCost)
    document.getElementById('total').textContent = ticketCost.toFixed(2) + ' USD';
    updateWeather2(sessionStorage.getItem('destinationLocation'));
  }, 100);
});

</script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Function to calculate and update the total amount
    function updateTotal() {
      // Get the ticket cost from session storage and convert it back to a float
      const ticketCost = parseFloat(sessionStorage.getItem('ticketCostFloat'));
      console.log("Ticket Cost from Session Storage: ", ticketCost);

      // Get the quantity entered by the user
      const quantity = parseInt(document.getElementById('quantity').value);

      // Check if ticketCost is a valid number and quantity is a valid number
      if (!isNaN(ticketCost) && !isNaN(quantity)) {
        // Calculate the total amount
        const total = ticketCost * quantity;

        // Update the content of the total element
        document.getElementById('total').textContent = total.toFixed(2) + ' USD';
      } else {
        // Display an error message if either ticketCost or quantity is not a valid number
        document.getElementById('total').textContent = 'Invalid input';
      }
    }

    // Add event listener to the quantity input field
    document.getElementById('quantity').addEventListener('input', updateTotal);

    // Initial call to updateTotal function to set the initial total amount
    updateTotal();

    // Set the content of the total element to '0.00' on page load
    document.getElementById('total').textContent = '0.00 USD';
  });
</script>



    <script src="../js/airports.js"></script>
    <script src="../js/schedule.js"></script>
    <script src="../js/menu.js"></script>
    <script src="../js/ticketCost.js"></script>
    <script src="../js/weather.js"></script>
  </body>
</html>
